{"version":3,"sources":["Features/Weather/reducer.ts","Features/Weather/saga.ts","store/sagas.js","Features/Metrics/reducer.ts","utils/constants.tsx","store/reducers.ts","store/index.ts","components/Chip.tsx","Features/Weather/Weather.tsx","components/Header.tsx","components/Wrapper.tsx","components/MultipleSelect.tsx","utils/utils.tsx","Features/Metrics/Metrics.tsx","components/MeasurementsChart.tsx","components/MeasureCard.tsx","components/AlertParagraph.tsx","utils/CustomHooks.ts","components/Dashboard.tsx","App.tsx","index.jsx"],"names":["slice","createSlice","name","initialState","temperatureinCelsius","temperatureinFahrenheit","description","locationName","reducers","weatherDataRecevied","state","action","payload","weatherApiErrorReceived","reducer","actions","apiErrorReceived","watchApiError","call","toast","error","takeEvery","WeatherActions","type","root","spawn","weatherSaga","Color","metrics","selectedMetrics","metricsReceived","metricsApiErrorReceived","alert","weather","weatherReducer","metricsReducer","combineReducers","withStyles","theme","background","palette","secondary","main","label","color","primary","Chip","client","createClient","url","getWeather","value","Weather","getLocation","useGeolocation","latLong","latitude","longitude","dispatch","useDispatch","useSelector","useQuery","query","variables","result","fetching","data","useEffect","message","getWeatherForLocation","LinearProgress","useStyles","makeStyles","grow","flexGrow","classes","AppBar","position","Toolbar","Typography","variant","className","wrapper","height","Wrapper","children","formControl","minWidth","inputLabel","chips","display","flexWrap","chip","margin","backgroundColor","MultipleSelect","values","changeCallback","useState","multipleSelectValue","setMultipleSelectValue","FormControl","InputLabel","id","Select","labelId","multiple","onChange","event","target","input","Input","renderValue","selected","map","MenuItem","subscriptionClient","SubscriptionClient","reconnect","graphqlClient","exchanges","defaultExchanges","subscriptionExchange","forwardSubscription","operation","request","getColor","metric","Math","floor","random","toString","selectContainer","marginBottom","marginTop","circularProgressWrapper","textAlign","justifyContent","alignItems","getMetrics","Metrics","Box","CircularProgress","CustomTooltip","active","length","date","Date","milliseconds","toUTCString","metricPelements","forEach","point","metricLabel","push","style","padding","borderRadius","defaultProps","metricUnits","unit","render","measuresByUnit","min","reduce","acc","curr","metricsByUnit","filter","yAxisToHide","find","ResponsiveContainer","width","LineChart","top","right","left","bottom","CartesianGrid","strokeDasharray","XAxis","interval","dataKey","dy","tickSize","tick","fontSize","Tooltip","content","item","index","Line","stroke","dot","yAxisId","isAnimationActive","YAxis","hide","tickCount","angle","dx","cardsConteiner","paddingBottom","cardContent","paddingRight","MeasureCard","measure","Grid","xs","sm","md","Card","CardContent","lastMeasure","AlertParagraph","bodyVariant","headerVariant","header","body","useSelectedMetricsWithLastMeasure","selectedMetricsWithLastMeasure","setSelectedMetricsWithLastMeasure","selectedMetricsStrings","selectedMetricsWithLastMeasureStrings","selectedMetricsSet","Set","removedElementAsSet","setA","setB","difference","elem","delete","setDifference","metricToRemove","getSelectedMetrics","dashboardContainer","batch","getTime","at","Dashboard","useSubscription","newMeasurementsSubResult","chartData","setChartData","setMetricUnits","multipleMeasurementsInput","metricName","useGetMultipleMeasurements","measurementsResponse","fetchingMeasurements","measurementsError","multipleMeasurementsResult","subscriptionResponse","subscriptionError","getMultipleMeasurements","auxMetricUnits","i","measurements","createMetricUnitsArray","limit","chartDataItems","count","k","getUTCHours","getUTCMinutes","createChartDataItems","newMetric","newMeasurement","newChartData","filters","measureToAdd","selectedMetric","filterNewMeasurement","newMetricInCurrentSelection","currentMetricLastMeasure","indexOfCurrentLastMeasure","indexOf","selectedMetricsWithLastMeasureReplacement","splice","chart","MeasurementsChart","showLoading","subscriptionLayout","container","spacing","Container","maxWidth","pt","pb","store","composeEnhancers","composeWithDevTools","sagaMiddleware","createSagaMiddleware","middlewares","applyMiddleware","createStore","run","sagas","createTheme","default","App","CssBaseline","Header","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.a2d08ec2.chunk.js","sourcesContent":["import { createSlice, PayloadAction } from 'redux-starter-kit';\n\nexport type WeatherForLocation = {\n  description: string;\n  locationName: string;\n  temperatureinCelsius: number;\n};\n\nexport type ApiErrorAction = {\n  error: string;\n};\n\nconst initialState = {\n  temperatureinCelsius: 0,\n  temperatureinFahrenheit: 0,\n  description: '',\n  locationName: '',\n};\n\nconst toF = (c: number) => (c * 9) / 5 + 32;\n\nconst slice = createSlice({\n  name: 'weather',\n  initialState,\n  reducers: {\n    weatherDataRecevied: (state, action: PayloadAction<WeatherForLocation>) => {\n      const { description, locationName, temperatureinCelsius } = action.payload;\n      state.temperatureinCelsius = temperatureinCelsius;\n      state.temperatureinFahrenheit = toF(temperatureinCelsius);\n      state.description = description;\n      state.locationName = locationName;\n    },\n    // eslint-disable-next-line no-unused-vars\n    weatherApiErrorReceived: (state, action: PayloadAction<ApiErrorAction>) => state,\n  },\n});\n\nexport const { reducer } = slice;\nexport const { actions } = slice;\n","import { takeEvery, call } from 'redux-saga/effects';\nimport { toast } from 'react-toastify';\nimport { PayloadAction } from 'redux-starter-kit';\nimport { actions as WeatherActions, ApiErrorAction } from './reducer';\n\nfunction* apiErrorReceived(action: PayloadAction<ApiErrorAction>) {\n  yield call(toast.error, `Error Received: ${action.payload.error}`);\n}\n\nexport default function* watchApiError() {\n  yield takeEvery(WeatherActions.weatherApiErrorReceived.type, apiErrorReceived);\n}\n","import { spawn } from 'redux-saga/effects';\nimport weatherSaga from '../Features/Weather/saga';\n\nexport default function* root() {\n  yield spawn(weatherSaga);\n}\n","import { createSlice, PayloadAction } from 'redux-starter-kit';\nimport { Metric } from './Interfaces';\n\ntype MetricsState = {\n  metrics: string[];\n  selectedMetrics: Metric[];\n};\n\nconst initialState: MetricsState = {\n  metrics: ['flareTemp', 'injValveOpen', 'oilTemp', 'casingPressure', 'tubingPressure', 'waterTemp'],\n  selectedMetrics: [],\n};\n\nexport type ApiErrorAction = {\n  error: string;\n};\n\nconst slice = createSlice({\n  name: 'metrics',\n  initialState,\n  reducers: {\n    metricsReceived: (state, action: PayloadAction<string[]>) => {\n      state.metrics = action.payload;\n    },\n    selectedMetrics: (state, action: PayloadAction<Metric[]>) => {\n      state.selectedMetrics = action.payload;\n    },\n    // eslint-disable-next-line no-unused-vars\n    metricsApiErrorReceived: (state, action: PayloadAction<ApiErrorAction>) => {\n      alert(action.payload.error);\n    },\n  },\n});\n\nexport const { reducer } = slice;\nexport const { actions } = slice;\n","/* eslint-disable no-unused-vars */\nconst WS_URL = 'wss://react.eogresources.com/graphql';\nconst API_URL = 'https://react.eogresources.com/graphql';\n\n// eslint-disable-next-line no-shadow\nexport enum Color {\n  flareTemp = 'green',\n  injValveOpen = 'blue',\n  oilTemp = 'red',\n  casingPressure = 'black',\n  tubingPressure = 'pink',\n  waterTemp = 'purple',\n}\n\nexport { WS_URL, API_URL };\n","import { reducer as weatherReducer } from '../Features/Weather/reducer';\nimport { reducer as metricsReducer } from '../Features/Metrics/reducer';\n\nexport default {\n  weather: weatherReducer,\n  metrics: metricsReducer,\n};\n","import { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport createSagaMiddleware from 'redux-saga';\nimport { combineReducers } from 'redux-starter-kit';\nimport sagas from './sagas';\nimport reducers from './reducers';\n\nconst reducer = combineReducers(reducers);\nexport type IState = ReturnType<typeof reducer>;\n\nexport default () => {\n  const composeEnhancers = composeWithDevTools({});\n  const sagaMiddleware = createSagaMiddleware();\n  const middlewares = applyMiddleware(sagaMiddleware);\n  const store = createStore(reducer, composeEnhancers(middlewares));\n\n  sagaMiddleware.run(sagas);\n\n  return store;\n};\n","import Chip from '@material-ui/core/Chip';\nimport { withStyles, Theme } from '@material-ui/core/styles';\n\nconst cardStyles = (theme: Theme) => ({\n  root: {\n    background: theme.palette.secondary.main,\n  },\n  label: {\n    color: theme.palette.primary.main,\n  },\n});\nexport default withStyles(cardStyles)(Chip);\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Provider, createClient, useQuery } from 'urql';\nimport { useGeolocation } from 'react-use';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { actions } from './reducer';\nimport Chip from '../../components/Chip';\nimport { IState } from '../../store';\n\nconst client = createClient({\n  url: 'https://react.eogresources.com/graphql',\n});\n\nconst query = `\nquery($latLong: WeatherQuery!) {\n  getWeatherForLocation(latLong: $latLong) {\n    description\n    locationName\n    temperatureinCelsius\n  }\n}\n`;\n\nconst getWeather = (state: IState) => {\n  const { temperatureinFahrenheit, description, locationName } = state.weather;\n  return {\n    temperatureinFahrenheit,\n    description,\n    locationName,\n  };\n};\n\nexport default () => {\n  return (\n    <Provider value={client}>\n      <Weather />\n    </Provider>\n  );\n};\n\nconst Weather = () => {\n  const getLocation = useGeolocation();\n  // Default to houston\n  const latLong = {\n    latitude: getLocation.latitude || 29.7604,\n    longitude: getLocation.longitude || -95.3698,\n  };\n  const dispatch = useDispatch();\n  const { temperatureinFahrenheit, description, locationName } = useSelector(getWeather);\n\n  const [result] = useQuery({\n    query,\n    variables: {\n      latLong,\n    },\n  });\n  const { fetching, data, error } = result;\n  useEffect(() => {\n    if (error) {\n      dispatch(actions.weatherApiErrorReceived({ error: error.message }));\n      return;\n    }\n    if (!data) return;\n    const { getWeatherForLocation } = data;\n    dispatch(actions.weatherDataRecevied(getWeatherForLocation));\n  }, [dispatch, data, error]);\n\n  if (fetching) return <LinearProgress />;\n\n  return <Chip label={`Weather in ${locationName}: ${description} and ${temperatureinFahrenheit}°`} />;\n};\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Weather from '../Features/Weather/Weather';\n\nconst useStyles = makeStyles({\n  grow: {\n    flexGrow: 1,\n  },\n});\n\nexport default () => {\n  const classes = useStyles();\n\n  // eslint-disable-next-line prettier/prettier\n  const name = 'Gerardo\\'s';\n  return (\n    <AppBar position=\"static\">\n      <Toolbar>\n        <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\n          {name}\n          EOG React Visualization Assessment\n        </Typography>\n        <Weather />\n      </Toolbar>\n    </AppBar>\n  );\n};\n","import React, { ReactChildren, ReactChild } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles({\n  wrapper: {\n    height: '100vh',\n  },\n});\n\ninterface WrapperProps {\n  children: ReactChild | ReactChildren;\n}\n\nconst Wrapper = ({ children }: WrapperProps) => {\n  const classes = useStyles();\n  return <div className={classes.wrapper}>{children}</div>;\n};\n\nexport default Wrapper;\n","import { InputLabel, FormControl, Select, Input, MenuItem, makeStyles, Chip } from '@material-ui/core';\nimport React, { useState } from 'react';\n\ntype MultipleSelectProps = {\n  values: string[];\n  changeCallback: Function;\n};\n\nconst useStyles = makeStyles({\n  formControl: {\n    minWidth: 180,\n  },\n  inputLabel: {\n    color: 'black',\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  chip: {\n    margin: 2,\n    backgroundColor: 'white',\n  },\n});\n\nconst MultipleSelect = ({ values = ['No metrics'], changeCallback }: MultipleSelectProps) => {\n  const [multipleSelectValue, setMultipleSelectValue] = useState<string[]>([]);\n  const classes = useStyles();\n\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    setMultipleSelectValue(event.target.value as string[]);\n    changeCallback(event.target.value as string[]);\n  };\n\n  return (\n    <FormControl className={classes.formControl}>\n      <InputLabel className={classes.inputLabel} id=\"mutiple-metric-label\">\n        Select metric...\n      </InputLabel>\n      <Select\n        labelId=\"mutiple-metric-label\"\n        id=\"mutiple-metric\"\n        multiple\n        value={multipleSelectValue}\n        onChange={handleChange}\n        input={<Input />}\n        renderValue={(selected) => (\n          <div className={classes.chips}>\n            {(selected as string[]).map((value) => (\n              <Chip key={`multipleSelect_${value}`} label={value} className={classes.chip} />\n            ))}\n          </div>\n        )}\n      >\n        {values.map((value: string) => (\n          <MenuItem key={`menuItem_${value}`} value={value}>\n            {value}\n          </MenuItem>\n        ))}\n      </Select>\n    </FormControl>\n  );\n};\n\nexport default MultipleSelect;\n","// GraphQL\nimport { SubscriptionClient } from 'subscriptions-transport-ws';\nimport { createClient, defaultExchanges, subscriptionExchange } from 'urql';\n\n// App stuff\nimport { MeasurementResponse, MeasurementsChartItem, Metric, MetricLine } from '../Features/Metrics/Interfaces';\nimport { API_URL, Color, WS_URL } from './constants';\n\nconst subscriptionClient = new SubscriptionClient(WS_URL, {\n  reconnect: true,\n});\n\nconst graphqlClient = createClient({\n  url: API_URL,\n  exchanges: [\n    ...defaultExchanges,\n    subscriptionExchange({\n      forwardSubscription: (operation) => subscriptionClient.request(operation),\n    }),\n  ],\n});\n\n/**\n * @returns Difference/Complement between setA and setB.\n */\nconst setDifference = (setA: Set<string>, setB: Set<string>) => {\n  const difference = new Set(setA);\n  setB.forEach((elem) => {\n    difference.delete(elem);\n  });\n  return difference;\n};\n\n/**\n *\n * @param data Measures array.\n * @param newMeasurement New measure coming from Subscription.\n * @param {Metric[]} filters Currently selected metrics.\n * @returns Measures array included latest measure from Subscription.\n */\nconst filterNewMeasurement = (\n  data: MeasurementsChartItem[],\n  newMeasurement: MeasurementsChartItem,\n  filters: Metric[],\n) => {\n  const measureToAdd: MeasurementsChartItem = {\n    id: newMeasurement.id,\n    at: newMeasurement.at,\n    milliseconds: newMeasurement.milliseconds,\n  };\n  // Add new measure for every selected metric.\n  filters.forEach((selectedMetric) => {\n    measureToAdd[selectedMetric.metric] = newMeasurement[selectedMetric.metric];\n  });\n  return [...data, measureToAdd];\n};\n\n/**\n * @param multipleMeasurementsResult Array measures returned from the API.\n * @param {number} limit This paramater is used to limit the number of points to render in the chart. Rendering all points\n * coming frmo the API makes the chart looks non-aesthetic since they are too many. Keep in mind, if this parameter is greater that\n * the number of measures, you'll get an assertion error. TODO: improve the previous issue to avoid unhandled exceptions.\n * @returns Data array in proper format to populate Recharts chart.\n */\n// eslint-disable-next-line no-unused-vars\nconst createChartDataItems = (multipleMeasurementsResult: MeasurementResponse[], limit: number) => {\n  const chartDataItems: MeasurementsChartItem[] = [];\n\n  if (multipleMeasurementsResult?.length !== 0) {\n    let date;\n    let count = 0;\n\n    for (let i = 0; i < multipleMeasurementsResult?.length; i += 1) {\n      for (\n        let k = multipleMeasurementsResult[i].measurements.length - limit;\n        k < multipleMeasurementsResult[i].measurements.length;\n        k += 1\n      ) {\n        chartDataItems[count] = chartDataItems[count] || {};\n        chartDataItems[count][multipleMeasurementsResult[i].metric] =\n          multipleMeasurementsResult[i].measurements[k].value;\n        date = new Date(multipleMeasurementsResult[i].measurements[k].at);\n        chartDataItems[count].at = `${date.getUTCHours()}:${date.getUTCMinutes()}`;\n        chartDataItems[count].milliseconds = multipleMeasurementsResult[i].measurements[k].at;\n        count += 1;\n      }\n      count = 0;\n    }\n  }\n\n  return chartDataItems;\n};\n\n/**\n * @param multipleMeasurementsResult Array measures returned from the API.\n * @returns Array of elements which contain metric name, unit and color used in the chart.\n */\nconst createMetricUnitsArray = (multipleMeasurementsResult: MeasurementResponse[]) => {\n  const auxMetricUnits: MetricLine[] = [];\n\n  if (multipleMeasurementsResult?.length !== 0) {\n    for (let i = 0; i < multipleMeasurementsResult?.length; i += 1) {\n      // eslint-disable-next-line no-debugger\n      //   debugger;\n      auxMetricUnits.push({\n        metric: multipleMeasurementsResult[i].metric,\n        unit: multipleMeasurementsResult[i].measurements[0].unit,\n        color: getColor(multipleMeasurementsResult[i].metric),\n        min: 0,\n        render: true,\n      });\n    }\n  }\n\n  return auxMetricUnits;\n};\n\n/**\n * @param metric Color's metric.\n * @returns A color in string format.\n */\nconst getColor = (metric: string) => {\n  return Color[metric as keyof typeof Color] || `#${Math.floor(Math.random() * 16777215).toString(16)}`;\n};\n\nexport { filterNewMeasurement, setDifference, graphqlClient, getColor, createMetricUnitsArray, createChartDataItems };\n","import React, { useEffect } from 'react';\nimport { Provider, createClient, useQuery } from 'urql';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Box, CircularProgress, makeStyles } from '@material-ui/core';\nimport { actions } from './reducer';\nimport { IState } from '../../store';\nimport MultipleSelect from '../../components/MultipleSelect';\nimport { getColor } from '../../utils/utils';\n\nconst useStyles = makeStyles({\n  selectContainer: {\n    marginBottom: 20,\n    marginTop: 20,\n  },\n  circularProgressWrapper: {\n    textAlign: 'center',\n    height: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n});\n\nconst client = createClient({\n  url: 'https://react.eogresources.com/graphql',\n});\n\nconst getMetricsQuery = `\nquery {\n  getMetrics\n}\n`;\n\nconst getMetrics = (state: IState) => {\n  const { metrics } = state.metrics;\n  return {\n    metrics,\n  };\n};\n\nconst Metrics = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { metrics } = useSelector(getMetrics);\n\n  const selectedValuesHandler = (values: string[]) => {\n    dispatch(\n      actions.selectedMetrics(\n        values.map((value) => {\n          return {\n            metric: value,\n            color: getColor(value),\n          };\n        }),\n      ),\n    );\n  };\n\n  const [result] = useQuery({\n    query: getMetricsQuery,\n  });\n  const { fetching, data, error } = result;\n\n  useEffect(() => {\n    if (error) {\n      dispatch(actions.metricsApiErrorReceived({ error: `${error.message}\\nUsing default metrics for selection` }));\n      return;\n    }\n    if (!data) return;\n    dispatch(actions.metricsReceived(data.getMetrics));\n  }, [dispatch, data, error]);\n\n  if (fetching) {\n    return (\n      <Box className={classes.circularProgressWrapper}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Box className={classes.selectContainer}>\n      <MultipleSelect values={metrics} changeCallback={selectedValuesHandler} />\n    </Box>\n  );\n};\n\nexport default () => {\n  return (\n    <Provider value={client}>\n      <Metrics />\n    </Provider>\n  );\n};\n","import React from 'react';\nimport { CartesianGrid, Line, LineChart, ResponsiveContainer, Tooltip, XAxis, YAxis } from 'recharts';\n\nimport { MeasurementsChartItem, MetricLine } from '../Features/Metrics/Interfaces';\n\ntype MeasurementsChartProps = {\n  data: MeasurementsChartItem[];\n  metricUnits: MetricLine[];\n};\n\ninterface CustomTooltipInterface {\n  active?: boolean;\n  payload?: any[];\n}\n\nconst CustomTooltip = ({ active, payload }: CustomTooltipInterface) => {\n  if (active && payload && payload.length) {\n    const date = new Date(payload[0].payload.milliseconds).toUTCString();\n    const metricPelements: JSX.Element[] = [];\n    payload.forEach((point) => {\n      const metricLabel = `${point.name}: ${point.value}`;\n      metricPelements.push(\n        <p style={{ margin: '0px 0px', color: point.color }} key={point.name}>\n          {metricLabel}\n        </p>,\n      );\n    });\n    return (\n      <div style={{ backgroundColor: 'white', padding: '1% 5% 8%', borderRadius: '5px' }}>\n        <p>{`${date}`}</p>\n        {metricPelements.map((metric) => metric)}\n      </div>\n    );\n  }\n\n  return null;\n};\n\nCustomTooltip.defaultProps = {\n  active: false,\n  payload: [],\n};\n\nexport default ({ data, metricUnits }: MeasurementsChartProps) => {\n  metricUnits.forEach((unit) => {\n    unit.render = false;\n    // Getting all measures by unit (ie [123, 122, 111] for oilTemp)\n    const measuresByUnit = data?.map((metric) => {\n      return metric[unit.metric];\n    });\n    // Setting the minimum measure of every metric\n    unit.min = measuresByUnit.reduce((acc, curr) => (acc < curr ? acc : curr)) as number;\n  });\n\n  metricUnits.forEach((unit) => {\n    const metricsByUnit = metricUnits.filter((metric) => {\n      return metric.unit === unit.unit;\n    });\n\n    const min =\n      metricsByUnit?.length > 1\n        ? metricsByUnit?.reduce((acc, curr) => {\n            return acc.min < curr.min ? acc : curr;\n          })\n        : metricsByUnit[0];\n\n    const yAxisToHide = metricUnits.find((metric) => {\n      return metric.metric === min.metric && metric.unit === min.unit;\n    });\n    if (yAxisToHide) yAxisToHide.render = true;\n  });\n\n  return (\n    <ResponsiveContainer width=\"100%\" height={400}>\n      <LineChart\n        margin={{\n          top: 5,\n          right: 30,\n          left: 20,\n          bottom: 15,\n        }}\n        data={data}\n      >\n        <CartesianGrid strokeDasharray=\"3 3\" />\n        <XAxis interval=\"preserveStart\" dataKey=\"at\" dy={5} tickSize={4} tick={{ fontSize: 12 }} />\n        <Tooltip content={<CustomTooltip />} />\n        <Tooltip />\n        {metricUnits?.map((item, index) => (\n          <Line\n            stroke={item.color}\n            dot={false}\n            yAxisId={index}\n            isAnimationActive={false}\n            type=\"monotone\"\n            dataKey={item.metric}\n            key={`${item.metric}XAxis`}\n          />\n        ))}\n        {metricUnits?.map((item, index) => (\n          <YAxis\n            hide={!item.render}\n            tickCount={10}\n            label={{ value: item.unit, angle: -90, position: 'insideTopLeft' }}\n            yAxisId={index}\n            dx={-5}\n            key={`${item.metric}YAxis`}\n          />\n        ))}\n      </LineChart>\n    </ResponsiveContainer>\n  );\n};\n","import { Card, CardContent, Grid, makeStyles, Typography } from '@material-ui/core';\nimport React from 'react';\nimport { LastMeasure } from '../Features/Metrics/Interfaces';\n\ntype MeasureCardProps = {\n  measure: LastMeasure;\n};\n\nconst useStyles = makeStyles({\n  cardsConteiner: {\n    paddingBottom: '1%',\n  },\n  cardContent: {\n    padding: '5%',\n    paddingRight: '10%',\n  },\n});\n\nconst MeasureCard = ({ measure }: MeasureCardProps) => {\n  const classes = useStyles();\n\n  return (\n    <Grid key={`grid_${measure.metric}`} xs={6} sm={4} md={3} item>\n      <Card>\n        <CardContent className={classes.cardContent}>\n          <Typography variant=\"h6\">{`${measure.metric} (${measure.unit})`}</Typography>\n          <Typography style={{ color: `${measure.color}` }} variant=\"h3\">\n            {measure.lastMeasure}\n          </Typography>\n        </CardContent>\n      </Card>\n    </Grid>\n  );\n};\n\nexport default MeasureCard;\n","import { Typography, TypographyVariant } from '@material-ui/core';\nimport React from 'react';\n\ntype TypographyColor = 'initial' | 'inherit' | 'primary' | 'secondary' | 'textPrimary' | 'textSecondary' | 'error';\n\ninterface AlertParagraphProps {\n  headerVariant: TypographyVariant;\n  color: TypographyColor;\n  header: string;\n  body: string;\n  bodyVariant: TypographyVariant;\n}\n\nconst AlertParagraph = ({ bodyVariant, headerVariant, color, header, body }: AlertParagraphProps) => {\n  return (\n    <div>\n      <Typography variant={headerVariant} color={color}>\n        {header}\n      </Typography>\n      <Typography variant={bodyVariant}>{body}</Typography>\n    </div>\n  );\n};\n\nexport default AlertParagraph;\n","import { Dispatch, SetStateAction, useEffect, useState } from 'react';\nimport { LastMeasure, Metric } from '../Features/Metrics/Interfaces';\n\nimport { setDifference } from './utils';\n\nexport default function useSelectedMetricsWithLastMeasure(\n  selectedMetrics: Metric[],\n): [LastMeasure[], Dispatch<SetStateAction<LastMeasure[]>>] {\n  const [selectedMetricsWithLastMeasure, setSelectedMetricsWithLastMeasure] = useState<LastMeasure[]>(\n    selectedMetrics.map((metric) => {\n      return {\n        metric: metric.metric,\n        lastMeasure: null,\n        unit: null,\n        color: metric.color,\n      };\n    }),\n  );\n\n  useEffect(() => {\n    // We need to listen changes from selectedMetrics to remove Cards when user unselect a metric.\n    if (selectedMetrics.length < selectedMetricsWithLastMeasure.length) {\n      const selectedMetricsStrings = selectedMetrics.map((metric) => metric.metric);\n      const selectedMetricsWithLastMeasureStrings = selectedMetricsWithLastMeasure.map((metric) => metric.metric);\n      const selectedMetricsSet = new Set(selectedMetricsStrings);\n      const selectedMetricsWithLastMeasureSet = new Set(selectedMetricsWithLastMeasureStrings);\n      const removedElementAsSet = setDifference(selectedMetricsWithLastMeasureSet, selectedMetricsSet);\n      const metricToRemove = [...removedElementAsSet][0];\n      setSelectedMetricsWithLastMeasure(\n        selectedMetricsWithLastMeasure.filter((metric) => metric.metric !== metricToRemove),\n      );\n    }\n  }, [selectedMetrics]);\n\n  return [selectedMetricsWithLastMeasure, setSelectedMetricsWithLastMeasure];\n}\n","import { Box, CircularProgress, Container, Grid, makeStyles } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Provider, useQuery, useSubscription } from 'urql';\nimport Metrics from '../Features/Metrics/Metrics';\nimport { IState } from '../store';\nimport MeasurementsChart from './MeasurementsChart';\nimport { MeasurementsChartItem, MetricLine } from '../Features/Metrics/Interfaces';\nimport { createChartDataItems, createMetricUnitsArray, filterNewMeasurement, graphqlClient } from '../utils/utils';\nimport MeasureCard from './MeasureCard';\nimport AlertParagraph from './AlertParagraph';\nimport useSelectedMetricsWithLastMeasure from '../utils/CustomHooks';\n\nconst newMeasurementSub = `\n  subscription NewMeasurementSub {\n    newMeasurement {\n      metric\n      value\n      unit\n      at\n    }\n  }\n`;\n\nconst getSelectedMetrics = (state: IState) => {\n  const { selectedMetrics } = state.metrics;\n  return {\n    selectedMetrics,\n  };\n};\n\nconst getMultipleMeasurementsQuery = `\n  query ($input: [MeasurementQuery]) {\n    getMultipleMeasurements(input: $input) {\n      metric\n      measurements {\n        metric\n        unit\n        value\n        at\n      }\n    }\n  }\n`;\n\nconst useGetMultipleMeasurements = (input: { metricName: string }[]) => {\n  const [getMultipleMeasurementsQueryResult] = useQuery({\n    query: getMultipleMeasurementsQuery,\n    variables: {\n      input,\n    },\n  });\n  return getMultipleMeasurementsQueryResult;\n};\n\nconst useStyles = makeStyles({\n  cardsConteiner: {\n    paddingBottom: '1%',\n  },\n  dashboardContainer: {\n    height: '100%',\n  },\n});\n\nlet batch: MeasurementsChartItem = {\n  id: new Date().getTime(),\n  at: '',\n  milliseconds: 0,\n};\n\nconst Dashboard = () => {\n  const classes = useStyles();\n  const [newMeasurementsSubResult] = useSubscription({ query: newMeasurementSub });\n  const [chartData, setChartData] = useState<MeasurementsChartItem[]>([]);\n  const [metricUnits, setMetricUnits] = useState<MetricLine[]>([]);\n  const { selectedMetrics } = useSelector(getSelectedMetrics);\n  const multipleMeasurementsInput = selectedMetrics.map((metric) => {\n    return { metricName: metric.metric };\n  });\n  const [selectedMetricsWithLastMeasure, setSelectedMetricsWithLastMeasure] = useSelectedMetricsWithLastMeasure(\n    selectedMetrics,\n  );\n  const {\n    data: measurementsResponse,\n    fetching: fetchingMeasurements,\n    error: measurementsError,\n  } = useGetMultipleMeasurements(multipleMeasurementsInput);\n  let multipleMeasurementsResult = measurementsResponse;\n  const { data: subscriptionResponse, error: subscriptionError } = newMeasurementsSubResult;\n\n  useEffect(() => {\n    multipleMeasurementsResult = multipleMeasurementsResult?.getMultipleMeasurements;\n    setMetricUnits(createMetricUnitsArray(multipleMeasurementsResult));\n\n    setChartData(createChartDataItems(multipleMeasurementsResult, 1000));\n  }, [multipleMeasurementsResult]);\n\n  useEffect(() => {\n    if (subscriptionResponse) {\n      const newMetric = subscriptionResponse.newMeasurement;\n      const date = new Date(newMetric?.at);\n\n      if (!batch[newMetric.metric]) {\n        batch[newMetric.metric] = newMetric.value;\n        batch.milliseconds = newMetric.at;\n        batch.at = `${date.getUTCHours()}:${date.getUTCMinutes()}`;\n\n        const newMetricInCurrentSelection = selectedMetrics.find((metric) => metric.metric === newMetric.metric);\n        const currentMetricLastMeasure = selectedMetricsWithLastMeasure.find(\n          (metric) => metric.metric === newMetric.metric,\n        );\n\n        if (newMetricInCurrentSelection) {\n          if (currentMetricLastMeasure) {\n            const indexOfCurrentLastMeasure = selectedMetricsWithLastMeasure.indexOf(currentMetricLastMeasure);\n            const selectedMetricsWithLastMeasureReplacement = [...selectedMetricsWithLastMeasure];\n            selectedMetricsWithLastMeasureReplacement.splice(indexOfCurrentLastMeasure, 1, {\n              lastMeasure: newMetric.value,\n              metric: newMetric.metric,\n              unit: newMetric.unit,\n              color: currentMetricLastMeasure.color,\n            });\n            setSelectedMetricsWithLastMeasure(selectedMetricsWithLastMeasureReplacement);\n          } else {\n            setSelectedMetricsWithLastMeasure([\n              ...selectedMetricsWithLastMeasure,\n              {\n                lastMeasure: newMetric.value,\n                metric: newMetric.metric,\n                unit: newMetric.unit,\n                color: newMetricInCurrentSelection.color,\n              },\n            ]);\n          }\n        }\n      } else {\n        const newChartData = filterNewMeasurement(chartData, batch, selectedMetrics);\n        if (newChartData.length !== chartData.length) setChartData(newChartData.slice());\n        batch = { id: new Date().getTime(), at: '', milliseconds: 0 };\n      }\n    }\n  }, [subscriptionResponse]);\n\n  const chart = measurementsError ? (\n    <AlertParagraph\n      bodyVariant=\"body1\"\n      body={measurementsError.message}\n      color=\"error\"\n      headerVariant=\"h6\"\n      header=\"Error while getting multiple measurements:\"\n    />\n  ) : (\n    <MeasurementsChart metricUnits={metricUnits} data={chartData} />\n  );\n\n  const showLoading = fetchingMeasurements ? <CircularProgress /> : chart;\n\n  const subscriptionLayout = subscriptionError ? (\n    <AlertParagraph\n      bodyVariant=\"body1\"\n      body={subscriptionError.message}\n      color=\"error\"\n      headerVariant=\"h6\"\n      header=\"Error while getting real time last measures:\"\n    />\n  ) : (\n    <Grid container spacing={2} className={classes.cardsConteiner}>\n      {selectedMetricsWithLastMeasure.map((measure) => {\n        return <MeasureCard measure={measure} key={measure.metric} />;\n      })}\n    </Grid>\n  );\n\n  return (\n    <Container className={classes.dashboardContainer} maxWidth=\"lg\">\n      <Metrics />\n      {subscriptionLayout}\n      <Box pt={2} pb={3} alignItems=\"center\" justifyContent=\"center\" display=\"flex\">\n        {selectedMetrics.length !== 0 && showLoading}\n      </Box>\n    </Container>\n  );\n};\n\nexport default () => {\n  return (\n    <Provider value={graphqlClient}>\n      <Dashboard />\n    </Provider>\n  );\n};\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { ToastContainer } from 'react-toastify';\nimport { MuiThemeProvider, createTheme } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport createStore from './store';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Header from './components/Header';\nimport Wrapper from './components/Wrapper';\n// import NowWhat from './components/NowWhat';\nimport Dashboard from './components/Dashboard';\n\nconst store = createStore();\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: 'rgb(39,49,66)',\n    },\n    secondary: {\n      main: 'rgb(197,208,222)',\n    },\n    background: {\n      default: 'rgb(226,231,238)',\n    },\n  },\n});\n\nconst App = () => (\n  <MuiThemeProvider theme={theme}>\n    <CssBaseline />\n    <Provider store={store}>\n      <Wrapper>\n        <>\n          <Header />\n          {/* <NowWhat /> */}\n          <ToastContainer />\n          <Dashboard />\n        </>\n      </Wrapper>\n    </Provider>\n  </MuiThemeProvider>\n);\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(App(), document.getElementById('root'));\n"],"sourceRoot":""}